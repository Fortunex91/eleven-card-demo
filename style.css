/* ====== Global & Layout ====== */
:root{
  --table-green:#214d2d;            /* Grundfarbton */
  --table-green-dark:#173822;
  --ink:#0b0f0d;
  --ink-soft:#2b3a34;
  --gold:#d7c28a;
  --popup-win:#38d18a;
  --popup-penalty:#ff5a70;
  --popup-neutral:#f6f1e6;
  --marble-vignette: rgba(0,0,0,.22);
}

html, body {
  height: 100%;
  margin: 0;
  color: #f3f7f4;
  font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
  /* Dezent grüner Marmor-Hintergrund (eingebettetes SVG+Noise) */
  background:
    radial-gradient(120% 80% at 50% 0%, transparent 40%, var(--marble-vignette) 100%),
    url("data:image/svg+xml;utf8,\
    <svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1200 800'>\
      <filter id='f'>\
        <feTurbulence type='fractalNoise' baseFrequency='0.8' numOctaves='2' seed='9' result='n'/>\
        <feColorMatrix type='matrix' values='0 0 0 0 0.07  0 0 0 0 0.20  0 0 0 0 0.12  0 0 0 0.9 0'/>\
        <feGaussianBlur stdDeviation='0.6'/>\
      </filter>\
      <rect width='1200' height='800' fill='%23214d2d'/>\
      <rect width='1200' height='800' filter='url(%23f)' opacity='0.25'/>\
      <g opacity='0.18'>\
        <path d='M0,700 C200,600 450,720 700,640 C900,580 1050,620 1200,590' stroke='%23173822' stroke-width='40' fill='none'/>\
        <path d='M0,500 C300,430 520,520 820,470 C980,445 1100,460 1200,450' stroke='%231c3f27' stroke-width='26' fill='none'/>\
      </g>\
    </svg>");
  background-size: cover;
  background-attachment: fixed;
}

/* Haupt-Container deines Spielfeldes (falls vorhanden) */
#game, #playfield, .board {
  position: relative;
  margin: 0 auto;
  max-width: 1100px;
  padding: 10px 16px 72px; /* Platz für Zeitleiste unten */
}

/* ====== Buttons (Tutorial / Restart) ====== */
#tutorialBtn, #restartBtn {
  position: absolute;
  top: 10px;
  padding: 8px 12px;
  background: rgba(18,35,24,0.7);
  border: 1px solid #355846;
  border-radius: 12px;
  color: #e7f2ec;
  cursor: pointer;
  backdrop-filter: blur(2px);
  transition: transform .08s ease, background .2s ease;
}
#tutorialBtn { left: 10px; }
#restartBtn { left: 120px; }
#tutorialBtn:hover, #restartBtn:hover { transform: translateY(-1px); background: rgba(25,50,34,.78); }

/* ====== Header: Score / Streak / Stock Count ====== */
#hud {
  position: relative;
  display: flex;
  justify-content: center;
  gap: 22px;
  margin: 10px 0 6px;
  font-weight: 600;
  text-shadow: 0 1px 0 #0d1b14;
}
#score,#streak,#stockCount { color: #f6f9f7; }
#stockLabel, .stock-label { display: none !important; } /* “Stock:” ausblenden */

/* ====== Karten ====== */
.card {
  position: absolute;
  width: 92px;
  height: 128px;
  border-radius: 12px;
  background-size: cover;
  background-position: center;
  box-shadow: 0 6px 18px rgba(0,0,0,.35), inset 0 0 0 1px rgba(255,255,255,.06);
  transition: transform .12s ease, filter .15s ease;
  will-change: transform;
}
.card.selectable:hover { transform: translateY(-3px); }
.card.unselectable {
  /* nicht transparent – nur dezent grau/entsättigt */
  filter: grayscale(0.35) brightness(0.88) contrast(0.98);
}

/* ====== Score Popups (Anti-Overlap) ====== */
#score-float-layer {
  position: absolute;
  inset: 0;
  pointer-events: none;
  overflow: visible;
}
.score-popup {
  position: absolute;
  min-width: 24px;
  padding: 4px 8px;
  border-radius: 10px;
  background: rgba(12,20,16,.85);
  border: 1px solid rgba(235,255,244,.14);
  color: var(--popup-neutral);
  font-weight: 700;
  font-size: 14px;
  letter-spacing: .2px;
  text-shadow: 0 1px 0 rgba(0,0,0,.6);
  transform: translate(-50%, -14px);
  animation: floatUp 900ms ease forwards;
  box-shadow: 0 6px 16px rgba(0,0,0,.35);
  white-space: nowrap;
}
.score-popup.win { color: var(--popup-win); border-color: rgba(56,209,138,.28); }
.score-popup.penalty { color: var(--popup-penalty); border-color: rgba(255,90,112,.28); }
@keyframes floatUp {
  0% { opacity: 0; transform: translate(-50%, -4px) scale(.95); }
  12% { opacity: 1; }
  60% { opacity: 1; transform: translate(-50%, -28px) scale(1); }
  100% { opacity: 0; transform: translate(-50%, -46px) scale(.98); }
}

/* ====== Zeitleiste ====== */
#timebar {
  position: absolute;
  left: 16px; right: 16px; bottom: 16px;
  height: 16px;
  border-radius: 999px;
  background: rgba(10,18,14,.55);
  border: 1px solid rgba(53,88,70,.6);
  overflow: hidden;
  box-shadow: inset 0 0 0 1px rgba(255,255,255,.05), 0 8px 24px rgba(0,0,0,.25);
}
#timebar .fill {
  height: 100%;
  width: 100%;
  background: linear-gradient(90deg, #51d0a0, #6ae6bb);
  transition: width .12s linear;
}
#timebar .label {
  position: absolute;
  inset: 0;
  display: grid;
  place-items: center;
  font-size: 12px;
  font-weight: 700;
  color: #0f1b15;
  text-shadow: 0 1px 0 rgba(255,255,255,.2);
  mix-blend-mode: soft-light;
}

/* ====== End-Overlay ====== */
#endOverlay {
  position: absolute;
  inset: 0;
  display: none;
  align-items: center;
  justify-content: center;
  background: rgba(6,12,9,.62);
  backdrop-filter: blur(3px);
  z-index: 999;
}
#endOverlay.show { display: flex; }
#endOverlay .panel {
  padding: 20px 24px;
  border-radius: 16px;
  background: rgba(18,35,24,.9);
  border: 1px solid rgba(235,255,244,.14);
  box-shadow: 0 12px 36px rgba(0,0,0,.35);
  text-align: center;
}
#endOverlay .panel h2 { margin: 0 0 8px; font-size: 20px; }
#endOverlay .panel p { margin: 0 0 14px; color: #e6f0eb; }
#endOverlay .panel button {
  padding: 8px 12px;
  border-radius: 12px;
  background: #2a5c45;
  border: 1px solid #3b7a5b;
  color: #e9f7f0;
  cursor: pointer;
}
